@import '../../mixins/box-sizing';
@import '../../../../../typography/utilities/typography-utility';

:host {
  // If the user sets a custom height on the checkbox
  // (height 100%, to fill a list item in a dropdown, for example)
  // The default behavior is to center the label and checkbox vertically.
  align-items: center;

  // Limit the clickable area to the bounds of the host element.
  position: relative;

  // If the user adds paddings to the host element, we it to stay the same size.
  box-sizing: border-box;
}

.tds-checkbox {
  @include tds-box-sizing;
  @include detail-02;

  color: var(--checkbox-label);
  display: flex;
  align-items: center;
  margin-left: -4px;

  input[type='checkbox'] {
    appearance: none;
    outline: none;
    margin: 0;
    border: 0;
    border-radius: 2px;
    width: 24px;
    height: 24px;
    position: relative;
    cursor: pointer;
    flex-shrink: 0;
    align-self: flex-start;

    + label {
      color: var(--checkbox-label);
      padding-left: var(--tds-spacing-element-4);
      padding-top: var(--tds-spacing-element-4);
      padding-bottom: var(--tds-spacing-element-4);
      cursor: pointer;
      display: flex;
      align-items: center;

      // This makes the whole of <tds-checkbox> clickable, even if its :host element is resized by the user.
      &::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        left: 0;
        top: 0;
      }
    }

    &::before,
    &::after {
      content: '';
      position: absolute;
      box-sizing: border-box;
    }

    &::before {
      width: 22px;
      height: 22px;
      left: 1px;
      top: 1px;
      border-radius: 4px;
    }

    &::after {
      border: 1px solid var(--checkbox-border);
      background-color: var(--checkbox-fill);
      width: 16px;
      height: 16px;
      left: 4px;
      top: 4px;
      border-radius: 2px;
    }

    &:hover {
      &::before {
        background-color: var(--checkbox-border-hover);
        opacity: var(--checkbox-background-opacity-hover);
      }
    }

    &:focus {
      &::before {
        background-color: var(--checkbox-border-focus);
        opacity: var(--checkbox-background-opacity-focus);
        transition: opacity 0.2s ease-in-out;
      }
    }

    &:disabled {
      cursor: not-allowed;

      &::after {
        border-color: var(--checkbox-border-disabled);
      }

      + label {
        color: var(--checkbox-label-disabled);
        cursor: not-allowed;
      }

      &:hover {
        &::before {
          display: none;
        }
      }
    }

    &:checked {
      &::after {
        background-image: var(--checkbox-background-image);
        background-color: var(--checkbox-border);
        background-repeat: no-repeat;
        background-position: center;
      }

      &:hover {
        &::before {
          background-color: var(--checkbox-border-hover);
          opacity: var(--checkbox-background-opacity-hover);
        }
      }

      &:disabled {
        &:hover::before,
        &::before {
          display: block;
          width: 16px;
          height: 16px;
          left: 4px;
          top: 4px;
          border: 1px solid #b0b7c4;
        }

        &::after {
          background-image: var(--checkbox-background-image-disabled);
          background-color: var(--checkbox-fill-disabled);
          color: var(--checkbox-border-disabled);
        }
      }
    }

    &:indeterminate {
      &::after {
        background-image: var(--checkbox-background-image-indeterminate);
        background-color: var(--checkbox-border);
        background-repeat: no-repeat;
        background-position: center;
      }

      &:disabled {
        &:hover::before,
        &::before {
          display: block;
          width: 16px;
          height: 16px;
          left: 4px;
          top: 4px;
          border: 1px solid #b0b7c4;
        }

        &::after {
          background-image: var(--checkbox-background-image-indeterminate-disabled);
          background-color: var(--checkbox-fill-disabled);
          color: var(--checkbox-border-disabled);
        }
      }
    }
  }
}
