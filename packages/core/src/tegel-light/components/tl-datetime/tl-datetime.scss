@use './tl-datetime-vars' as *;
@use '../../../mixins/box-sizing' as *;
@use '../../../../../../typography/mixins/type-styles' as *;

.tl-datetime {
  display: block;
  min-width: 208px;
  background: unset;

  &--no-min-width {
    min-width: auto;
  }

  /* Native picker visuals */
  input[type='datetime-local'],
  input[type='date'],
  input[type='month'],
  input[type='week'],
  input[type='time'] {
    &::-webkit-inner-spin-button,
    &::-webkit-calendar-picker-indicator {
      opacity: 0;
    }
  }
}

/* Firefox-specific icon hiding for date/datetime */
@supports (-moz-appearance: none) {
  .tl-datetime__icon--datetime {
    .tl-datetime.type-datetime-local &,
    .tl-datetime.type-date & {
      display: none;
    }
  }
}

.tl-datetime__label {
  @include detail-05;

  display: block;
  margin-bottom: var(--tds-spacing-element-8);
  color: var(--datetime-label);

  .tl-datetime--disabled & {
    color: var(--datetime-label-disabled);
    cursor: not-allowed;
  }
}

.tl-datetime__wrapper {
  border-radius: var(--datetime-border-radius);
  position: relative;
  height: 56px;
  box-sizing: border-box;
  background-color: var(--datetime-background);

  .tl-datetime--md & {
    height: 48px;
  }

  .tl-datetime--sm & {
    height: 40px;
  }

  .tl-datetime--disabled & {
    cursor: not-allowed;
  }
}

.tl-datetime__input {
  @include tds-box-sizing;
  @include detail-02;

  border-radius: var(--datetime-border-radius);
  width: 100%;
  box-sizing: border-box;
  margin: 0;
  border: none;
  outline: none;
  height: 100%;
  color: var(--datetime-text);
  background-color: var(--datetime-background);
  padding: var(--tds-spacing-element-20) var(--tds-spacing-element-16);
  box-shadow: inset var(--datetime-box-shadow);
  transition: box-shadow 0.2s;

  &:focus {
    box-shadow: inset var(--datetime-box-shadow-focus);
  }

  .tl-datetime:hover &:not(:focus) {
    box-shadow: inset var(--datetime-box-shadow-hover);
  }

  .tl-datetime--error & {
    box-shadow: inset var(--datetime-box-shadow-error);

    &:focus {
      box-shadow: inset var(--datetime-box-shadow-error-focus);
    }
  }

  .tl-datetime--error:hover &:not(:focus) {
    box-shadow: inset var(--datetime-box-shadow-error-hover);
  }

  &::placeholder {
    opacity: 1;
    color: var(--datetime-placeholder);
  }

  &:focus::placeholder {
    color: var(--datetime-placeholder-focus);
  }

  &:disabled {
    background-color: var(--datetime-background-disabled);
    color: var(--datetime-text-disabled);
    cursor: not-allowed;

    &::placeholder {
      color: var(--datetime-placeholder-disabled);
    }

    ~ .tl-datetime__label-inside {
      color: var(--datetime-label-disabled);
    }
  }

  /* Type-based icon toggling */
  &[type='datetime-local'],
  &[type='date'],
  &[type='month'],
  &[type='week'] {
    ~ .tl-datetime__icon--time {
      display: none;
    }
  }

  &[type='time'] {
    ~ .tl-datetime__icon--datetime {
      display: none;
    }
  }

  .tl-datetime--label-inside & {
    padding-top: var(--tds-spacing-element-24);
    padding-bottom: 15px;
  }

  .tl-datetime--md.tl-datetime--label-inside & {
    padding-top: var(--tds-spacing-element-20);
    padding-bottom: 11px;
  }

  .tl-datetime--sm & {
    padding: var(--tds-spacing-element-16);
  }
}

.tl-datetime__icon {
  height: 20px;
  width: 20px;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  right: 18px;
  pointer-events: none;
  color: var(--datetime-icon);

  .tl-datetime--disabled & {
    color: var(--datetime-icon-disabled);
  }

  .tl-datetime--error & {
    color: var(--datetime-icon-error);
  }
}

.tl-datetime__label-inside {
  @include detail-07;

  position: absolute;
  pointer-events: none;
  color: var(--datetime-label-inside);
  left: 16px;
  transition: 0.1s ease all;

  .tl-datetime--lg & {
    top: 12px;
  }

  .tl-datetime--md & {
    top: 8px;
  }

  .tl-datetime--sm & {
    display: none;
  }
}

.tl-datetime__helper {
  @include detail-05;

  display: inline-flex;
  gap: 8px;
  padding-top: var(--tds-spacing-element-4);
  color: var(--datetime-helper);

  .tl-icon--error {
    display: none;
  }

  .tl-datetime--disabled & {
    color: var(--color-foreground-text-disabled);
  }

  .tl-datetime--error & {
    color: var(--datetime-helper-error);
  }

  .tl-datetime--error & .tl-icon--error {
    display: inline-flex;
  }
}
